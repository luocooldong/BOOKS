# Apress Source Code

越来越多的人开始意识到，网站即软件，而且是一种新型的软件。

这种互联网软件采用客户端和服务器模式，建立在分布式体系上，通过互联网通信，
具有高延时，高并发等特点。


网站开发，完全可以采用软件开发的模式。但是在系统上，软件和网络是两个不同的领域，很少有交集。
软件开发主要针对单机环境，网络则主要研究系统之间的通信。互联网的兴起，使得这两个领域开始融合，现在我们
必须考虑，如何开发在互联网环境中使用的软件。

Restful架构，就是目前最流行的一种互联网软件架构。 它结构清晰，符合标准，易于理解，扩展方便，
所以正得到越来越多网站的采用。

1.  起源，

   表现层状态转化。

## 资源 （Resources)
   
   表现层其实是资源的意思，所谓资源其实就是网络上的一个实体，或者说是网络上的一个具体信息。
   可以是一个文本，一张图片，一首歌曲，一种服务，总之，就是一个具体的实在。你可以拥有一个
   URI（统一资源定位符） 指向它，每一种资源对应着一个特定的URI。要获取这个资源，访问它的URI就可以，
   因此URI就成了每个资源的地址，或者独一无二的识别符。
   
## 表现层 (Representation)

   资源是一种信息实体，它可以有多种外在表现形式。我们把资源具体呈现出来的方式，叫做它的“表现层”。
   
   比如，文本可以用txt格式来表现，也可以用HTML格式， XML格式， JSON格式， 甚至可以采取二进制格式，
   图片可以用JPG格式来表现，也可以用PNG格式来表现。
   
   URI只是代表资源的实体，不代表它的形式。严格的说，有些网址后面的.html 后缀名时不必要的， 因为这个后缀名
   表示格式，属于表现层的范畴， 而URI应该只代表资源的位置。它的具体表现形式，应该在HTTP请求的头部信息中
   用accept和content-type字段指定， 这两个字段才是对表现层的描述。
   
## 状态转移  （State Transfer）
   
   访问一个网站，就代表了客户端与服务器端的一个互动过程。在这个过程中， 势必要设计到数据和状态的变化。
   
   互联网通信协议HTTP协议，是一个无状态协议。这意味着，所有的状态都保存在了服务器端。
   因此， 如果客户端想要操作服务器， 必须通过某一种手段，让服务器端发生状态转化。而这种状态转换是建立在
   表现层之上的，所以就是表现层状态转化。
   
   客户端用到的手段，只能是Http协议，具体来说，就是HTTP协议里面，四个表示操作方式的动词， GET， POST，
   PUT， DELETE。  他们分别对应着四种基本操作，GET用来获取资源， POST用来新建资源（也可以用来更新资源），
   PUT用来更新资源， DELETE用来删除资源。
   
#   六， 综述

  综合上面的解释，我们来总结一下什么是RESTFUL架构。
  
  1.  每一个URL代表一种资源。
  
  2.  客户端和服务器之间， 传递这种资源的某种表现层。
  
  3.  客户端通过四个HTTP动词，对服务器端进行操作，实现表现层状态转化。
  
#   七， 误区

  RESTFUL 架构有一些典型的设计误区。
  
  最常见的一种错误， 就是URI包含动词， 因为资源表示一种实体，所以应该是名词，但是URI不应该有动词， 动词应该放在
  HTTP请求协议中。
  
  举例来说， 某个URI是posts／show／1 ，其中show 是动词， 这个URI就设计错了， 正确的写法应该是post1/1，
  然后用get方法表示show。
  
  
  如果某某一些动作是http动词表现不了的，你就应该把动作做成一种资源，比如网上汇款， 从账户1到账户2汇款500元，
  错误的URI是，  POST ／accounts／1/transfer／500/to/2
  
  正确的URI是把动词transfer改成名词transaction， 资源不能是动词， 但是可以事一种服务。
  
  ```
  
  POST /transaction HTTP/1.1
　　Host: 127.0.0.1
　　
  from=1&to=2&amount=500.00
  
  ```
  
  另一个设计误区就是在URL中加入版本号，
  
  ````
  　http://www.example.com/app/1.0/foo
　　http://www.example.com/app/1.1/foo
　　http://www.example.com/app/2.0/foo
  ````
  
  因为不同的版本，可以理解成同一种资源的不同表现形式，所以应该采用同一个URI。
  版本号可以在HTTP请求头信息的Accept字段中进行区分。
  
  ```
    Accept: vnd.example-com.foo+json; version=1.0
　　Accept: vnd.example-com.foo+json; version=1.1
　　Accept: vnd.example-com.foo+json; version=2.0
  ````